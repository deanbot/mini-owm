# mini-owm

A wrapper around Open Weather Map's [One Call Api](https://openweathermap.org/api/one-call-api).

Configure it via [initialization](#Constructor-parameters), [chaining](#Chaining), [individual calls](#Get-Parameters), or mix and match.

mini-owm also simplifies the Open Weather Api by:

- defaulting to metric (_who uses kelvin?_)
- applying the nested `1h` property from `rain` and `snow` directly to those properties (_who starts a json property with a number?_)
    - i.e. instead of `current.rain['1h']` the rain value is at `current.rain`
- defaulting empty` rain` or `snow` to `0` instead of omitting (_0 is better than undefined_)

### Install

`npm install mini-owm`

### Required Params

To make a call to OpenWeatherMap you must provide an api key, latitude, and longitude. All other configuration is optional.

### Constructor parameters

```js
import MiniOwm, { Units } from 'mini-owm';

// constructor parameters are all optional
const api = new MiniOwm(
  '<your api key here>', // owm api key
  33.441792, // latitude
  -94.037689, // longitude
  'hourly,minutely' // exclude
  Units.Imperial, // units (default is 'metric' for mini-owm)
  'de' // language
);

api.get().then(res => {
  console.log(res);
});
```

### Chaining

```js
import MiniOwm from 'mini-owm';
const api = new MiniOwm();
api
  .apiKey('<your api key here>')
  .latitude(33.441792)
  .longitude(-94.037689)
  .exclude('hourly,minutely')
  .standard() // set units to standard (Kelvin)
  .imperial() // set units to imperial (Fahrenheit)
  .metric() // set units to metric (Celcius) - this is default for mini-owm
  .language('de')
  .get()
  .then(res => {
    console.log(res);
  });
```

### Get Parameters

```js
import MiniOwm, { Units } from 'mini-owm';

// get attributes properties are all optional
new MiniOwm()
  .get({
    apiKey: '<your api key here>',
    coords: {
      latitude: 33.441792,
      longitude: -94.037689,
    },
    exclude: 'hourly,minutely',
    units: Units.Metric, // or 'metric'
    language: 'de'
  })
  .then(res => {
    console.log(res);
  });
```

# Development

- Notes:
  - Written in TypeScript
  - Compiled to UMD via WebPack
  - Compiled to ES6 via TSC
  - Typings generated by TSC
- Setup: `pnpm install`
- Configure: create `.env` with contents: `API_KEY=<your api key here>`
- Serve: `pnpm run start`

See [index.ejs](./index.ejs).

## Runtimes

Latest tested runtimes

- node: 10.16.3
- pnpm: 2.15.1
